# 서버리스(serverless)?? 서버가 없는 거..?

## 서버리스가 무엇인가?

- 서버리스는 애플리케이션을 빌드하고, 백엔드 디자인하는 방법을 바꾸고 있음
- 잘모르는 사람들 왈
  - 서버 + 리스 => 백엔드에 서버가 없구나!
- 서버가 없는 건 불가능함
- 서버리스는 서버가 없는 백엔드라는 뜻이 아님
- 백엔드인데, 내가 직접 서버를 관리하지 않는 경우를 의미함
- "SERVERLESS" = "Backend without Server Management"

## 왜 서버리스가 탄생했나?

- 이전에는 어떻게 애플리케이션을 배포했는지 알아보자
  - 직접 서버를 사야하는 시절이 있었음
  - 거실에 놓고 전원을 꼽아야하는..
  - 즉, 서버의 하드웨어, 소프트웨어 둘다 관리했었다는 말임
  - 정전되거나 누가 전원을 빼버리면 서버가 다운됨
  - 또는 트래픽이 증가하면 메모리가 부족해서 계속해서 추가로 메모리를 사서 서버에 연결해야됨
  - 이 모든 것을 수동으로,, 거실에서,,
- 이때 아마존이 등장해서 EC2라는 것을 선보임
  - 덕분에 아마존에 돈을 내면 최신식 서버를 빌려서 사용할 수 있게 됨 => "규모의 경제"
- 이젠 구글, 아마존, MS의 서버를 돈을 내고 빌리면 됨
  - 큰 회사들이 서버 하드웨어 부분을 책임지고 관리해주는 시대가 온 거임
  - 하지만 서버의 소프트웨어는 관리를 직접해줘야됨
  - 소프트웨어만 관리하는 것도 은근히 귀찮음
    - 업데이트, 보안, 데이터 백업.. 등등
- 이때 서버리스가 등장!
  - 서버리스를 활용하면, 백엔드를 서버에 올리는 것이 아님
  - 백엔드를 작은 함수단으로 쪼개서 내가 직접 관리하지않는 서버로 올림
  - 예를 들면 AWS lambda 같은 거에다가 올림
  - 이게 서버리스의 가장 큰 특징임

## 장점

- 서버리스가 아닌 경우, 서버는 24시간 돌아가고 있음, 언제나 요청에 응답할 준비를 하고 있음
- 서버리스의 경우, 내가 업로드한 함수는 잠을 자고 있음
  - 리퀘스트가 오는 순간, AWS는 함수를 깨움 > 요청한 작업 수행 > 다시 잠듬
  - 즉, 24시간동안 깨어서 대기 안해도 된다는 것
  - 덕분에 엄청 저렴해짐
  - 이전에는 유저가 0명이든 100명이든 같은 돈을 내야했음
  - 서버리스에서는 수행한 함수만큼만 돈을 내면 됨!
  - 아무 요청이 없어서 함수가 잠이들면 돈을 안내도 되는 것
  - 덕분에 AWS lambda는 엄청 저렴함
    - 1백만개의 함수 수행을 20센트면 할 수 있음



## 장점

## 단점

- 첫번째 단점: "cold start"
  - 리퀘스트가 와서 잠을 자고 있는 함수를 깨울 때, 시간이 걸림
  - 그렇게 긴 시간은 아니지만, 24시간 대기하고 있는 서버에 비해서는 느림
  - 그 정도의 시간차도 허용되지 않는 서비스의 경우에는 서버리스는 좋은 선택이 아닐 수 있음
  - 이러한 일에 대비하기 위해서 AWS lambda는 자주 사용되는 함수를 파악해서 리퀘스트에 빨리 대응할 수 있도록 대기시킴
  - 어찌되었건 서버가 응답하는데 시간이 걸릴 수 있다는 것이 단점
- 두번째 단점: 서버 제공자에게 너무 의지하게 됨
  - 만약 서버리스 백엔드를 AWS에 배포했다면, 거의 AWS랑 결혼한 것과 같음
  - 단순하게 함수를 빼서 다른 곳으로 이사갈 수 있다는 뜻이 아님
  - 한 서버리스에서 다른 쪽으로 마이그레이팅하는 것은 쉽지 않음
  - AWS에서 서버를 빌렸다가 구글 클라우드로 이사가는 건 쉽지만 서버리스의 경우에는 힘듬
  - 서버리스로 작업하면 어플리케이션의 구조자체가 바뀌게 되기 때문에
  - 왜냐면 내가 서버를 통제한다는 마인드에서 일단 바꿔야함

## 누가 써야하나?

- 일단 사이드프로젝트하는 사람들한테 추천
- 혹은 빠르게 프로토타입을 출시하고 싶은 경우
- 서버리스로 작업하면 코드에만 집중하면됨, 설정은 신경을 크게 안써도 됨
- 서버 관리하고 설정하는데 시간을 아끼고 싶다? => 서버리스가 정답



## 결론

- 서버리스의 장점: 빠르게 제품 출시 가능, 돈도 절약할 수 있음
- 서버리스의 단점: 서버에 대한 통제를 잃음, 구조를 변경해줘야함
- 서버리스가 기존의 방식을 대체하지는 않겠지만 그래도 빠른 제품 출시가 목표인 경우에는 꽤 매력적이라고 할 수 있음
- 서버리스에 대해서 배워보고 싶다면
  - Serverless.com
  - AWS lambda
  - Google cloud functions
  - Apex
  - Terraform
  - 을 참고해보자



