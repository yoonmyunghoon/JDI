# REST API 간단 정리

## REST API란?

- 정보들이 주고받아지는 데 있어서 개발자들 사이에 널리 쓰이는 일종의 형식
- 어떤 기술이나 제품이 아니라, 형식이기 때문에 어떤 프로그래밍 언어를 쓰던 무슨 프레임워크를 쓰던, 뭐에다 소프트웨어를 만들든 이 폼에 맞춰서 기능들을 만들어내면 되는 것
- 일단 API가 먼지부터 알아보자

## API란?

- 하드웨어에서는 어떤 기계 장치를 만들면 리모컨같은 제어장치를 만들어야됨
- 이렇게 사람과 연결해주는 역할하는 것을 인터페이스라고 함
- 소프트웨어에서는 앱이나 웹사이트에서 볼 수 있는 버튼, 스크롤바 등 여러가지 UI를 볼 수 있음
- IT세계에서는 눈에 안보이는 것들이 더 많음
- 기계와 기계, 소프트웨어와 소프트웨어 사이에서도 수많은 요청과 정보 교환이 이뤄지고 있음
- 이들 사이에서도 소통할 수 있는 창구가 필요한 것
- 예를 들면 기상청 서버가 있고 수많은 앱, 웹에서 이 서버로 부터 제공되는 실시간 날씨 정보를 요청하고 받아서 사용자들한테 제공하고 있음
- 그럼 이 기상청 서버에 요청을 보낼 때, 지정된 형식이 있어야겠지?
- 이렇게 정해진 형식으로 요청을 보내서 응답을 받을 수 있는 수단을 API(Application Programming Interface)라고 하는 것
- 꼭 네트워크 상에서만 API가 있는게 아님
- 로컬 프로그램인 브라우저는 Web API를 통해 자바스크립트로부터 특정 동작들을 지시받기도 함
- 윈도우에는 개발자들이 프로그램을 개발할 때 시스템이나 하드웨어에 대한 세세한 지식 없이도 지정된 명령어로 윈도우에서 동작을 수행하도록 소프트웨어를 짤 수 있는 Windows API를 제공함
- '이 함수를 넣으면 윈도우가 이렇게 해준다'는걸 알면 개발자들은 그 명령어들로 코드를 짜면 되는 것
- 이제 REST API가 먼지 다시 알아보자

## REST API

- 프론트엔드 웹에서 서버에 데이터를 요청하거나 배달 앱에서 서버에 주문을 넣거나 등 이런 서비스들에서 오늘날 널리 사용되는 것이 RESTF란 형식의 API임
- 과거의 SOAP이란 복잡한 형식을 대체한 것
- REST의 가장 중요한 특징은 각 요청이 어떤 동작이나 정보를 위한 것인지를 그 요청의 모습 자체로 추론 가능하다는 것
- 사실 만들고자 하는 서비스에서 기능 자체만 중요하게 생각한다면 REST고 머고 생각할 필요없이 동작만하게 만들면 그만임
- 문제는 서비스를 이 개발자 혼자 만드는게 아니라는 것
- 당장은 혼자라도 나중에 다른 개발자한테 인계해줘야하거나 또는 이 API를 사용해서 다른 제품을 만들 개발자들은 굉장히 일하기 힘들어질 것
- RESTful하게 만든 API는 요청을 보내는 주소만으로도 대략 이게 뭘 하는 요청인지 파악이 가능함
- 자원을 구조와 함께 나타내는 이런 형태의 구분자를 URI라고 함
- 조회, 생성, 수정, 삭제 요런 것들을 CRUD라고 부름
- 서버에 REST API로 요청을 보낼 때는 HTTP라는 규약에 따라 신호를 전송함
- 우체국에서 멀 부칠 때 일반우편, 등기, 택배 등 다양한 방식이 있듯이 이 HTTP로 요청을 보낼 때에도 여러 메소드들이 있음
- REST API에서는 이 여러가지 메소드들 중에서 4~5가지를 사용함
- GET, POST, DELETE, PUT, PATCH
- 소포가 편지보다 더 많은 걸 담을 수 있듯이 POST, PUT, PATCH에는 body라는 주머니가 있어서 DELETE나 GET보다 정보를 많이 비교적 안전하게 감춰서 실어보낼 수 있음
- 사실 이것들의 기능이 특정 용도에 제한되어 있지는 않음
- 예를 들어 POST 하나로도 데이터를 쓰고 읽고 수정하고 지우고까지 다 할 수 있음
- 하지만 누구든 각 요청의 의도를 쉽게 파악할 수 있도록 RESTful하게 API를 만들기 위해서는 이들을 목적에 따라 구분해서 사용해야함
- GET은 데이터를 Read, 조회하는데 사용함

```
(get) https://(도메인)/classes/2/students
>>> 이걸보면, 2반의 학생들을 보기 위한 요청이구나 라는 걸 알 수 있음
```

- POST는 Create, 정보를 추가하는데 사용됨

```
(post) https://(도메인)/classes/2/students
body {"idx":11, "name":"최기타", "sex":"male"}
이렇게 body에다가 추가할 정보를 넣어서 같이 요청을 보냄
새로운 학생을 추가하는 상황에서는 idx의 값을 굳이 명시하지 않아도 됨
```

- PUT/PATCH는 Update, 정보를 수정하는데 사용됨

```
(PUT or PATCH) https://(도메인)/classes/2/students/14
body {"idx":14, "name":"강메론", "sex":"male"}
이렇게 body에다가 변경할 정보를 넣어서 같이 요청을 보냄
이 때는 변경하려는 데이터를 찾을 수 있게 idx의 값을 같이 보냄
```

- PUT과 PATCH의 사용은 쓰는 곳마다 다르고 그냥 다 PUT으로 하는 곳도 있는데 알려진 정석은 PUT은 정보를 통째로 갈아끼울 때, PATCH는 정보 중 일부를 특정 방식으로 변경할 때 사용하는 것

- 어떤 학생이 학원을 그만두면 DELETE를 사용

```
(DELETE) https://(도메인)/classes/2/students/3
3번 학생 삭제, 확인할 수 있게 idx까지 적어줘야됨
```

- POST하나로도 모든 기능을 다 만들수 있지만 어떻게 동작하는지를 다 표현할려면 URI에 동작까지 명기해야됨

```
(post) https://(도메인)/classes/2/students/create
(post) https://(도메인)/classes/2/students/read
(post) https://(도메인)/classes/2/students/update
(post) https://(도메인)/classes/2/students/delete
이런식으로..
```

- 정석에 비해 깔끔하지가 않음
- 이런 것을 지양하기 위해서 URI는 동사가 아닌 명사들로 이루어져야 한다는게 있음
- 결국 REST API란 HTTP 요청을 보낼  어떤 URI에 어떤 메소드를 사용할지 (+기타) 개발자들 사이에 널리 지켜지는 약속임
- 형식이기 때문에, 기술에 구애받는 것이 아님
- 앱을 만들든 웹사이트를 만들든 어떤 언어로 무엇을 써서 만들든 거기에 소프트웨어간 HTTP로 정보를 주고받는 부분이 있다면 이 형식, 규칙들을 준수해서 RESTful한 서비스를 만드는 연습을 해볼 수 있음
- 용도에 따라 REST API의 대안으로 떠오르는 GraphQL에 대해서도 나중에 알아보자

